/*  이 프로그램은 1994년 8월에 김태욱에 의해서 작성되기 시작해서
    1994년 12월경에 버젼 1.0이 완성되었습니다. 

    돌탱크 전자 게시판 프로그램.

    이 프로그램의 저작권은 김태욱에게 있습니다. 
				하이텔: hommage
				나우콤: hommage
				인터넷: hommage@power3.snu.ac.kr
					s_scsc@cd4680.snu.ac.kr

    이 프로그램은 서울대학교 전기공학부의 전자게시판을 위해서 
    작성되었습니다.

    이 프로그램은 공개 소프트웨어의 한 종류인, 채리티웨어입니다.
    ; 당신은 FSF에서 발간한 GNU 선언문 취지아래 이 프로그램을 배포할 수
      있습니다.
    
    이 프로그램의 무료 배포는 리눅스에 한정합니다.
    만일, 당신이 다른 오퍼레이팅 시스템으로의 포팅이나, 상업적 목적에
    사용하고자 한다면, 제작자의 동의와 허락을 얻어야 합니다.

    당신은 이 프로그램과 함께 DOLTANK.txt를 제공받았어야 합니다. 만일
    그러하지 않다면, 
    서울대 전기공학부 전자게시판 운영자에게 알려주십시요.

					서울 관악구 신림동
					서울대학교 전기공학부
					전자게시판 운영자...
------------------------------------------------------------------------- 

    DOLTANK Bulletin Board System.

    Copyright (C) 1994, Kim tae wook, 
				HiTel: hommage
				NowCom: hommage
				Internet: hommage@power3.snu.ac.kr
					  s_scsc@cd4680.snu.ac.kr    

    This program is for Bulletin Board System of the department of
    the Electric of the SNU.
    This program is a Charityware, a kind of free software.
    
    Charge-free distribution of this is only for the LINUX.
    In case, you are porting this program into the other Operating 
    Systems or you are using it for the purpose of MERCHANTABILITY
    then you should earn the agreement or permitment from the 
    programmer.

    You should have received DOLTANK.txt in addition to this program.
    If you failed in doing so, 
    Write to the sysop of BBS of the Department of the Electric of
    SNU.

					Seoul Kwan-Ak Shilim-dong
					SNU the department of electric
					BBS sysop, Kim tae wook...

*/
------------------------------------------------------------------------------
차례
------------------------------------------------------------------------------
 1. 제작동기
 2. 프로그램 설명
 3. 프로그램 설치
 4. 프로그램 이용방법(운영자 가이드 참조)
 5. 후 원 금
------------------------------------------------------------------------------

+----------------------------------------------------------------------+
I  돌탱크의 제작목적은 서울대학교 전기전자제어공학과군의 단합을 위한   I 
I  전자게시판의 운영을 위해서 만들었습니다.                            I
+----------------------------------------------------------------------+


			1. 제작동기 

 리눅스를 배우기 시작한 것은 내가 군대를 마치고 나서 한 1달 후였다. 
 94년 8월경으로 생각된다. 그때에는 학교도 안 나가고 참으로 시간이 널럴했기
 때문에 다른 곳에 몰두할 기회가 있었다. 그런데 리눅스를 우연찮게 안 것이다.
 참으로 리눅스는 나에게 있어서 새로운 경험을 가지게 하는 좋은 경험이었다고
 나는 생각한다. 학교에 있는 썬과 똑같은 장난을 집에서 할 수 있다니...
 조금 공부하다보니 전에 도스에서 하던 비비에스를 여기서 하면 얼마나 좋을까?
 하고 생각하면서 열심히 이곳저곳 호스트 프로그램을 뒤집고 다녔다. 그런데
 이런 무슨 호스트가 이렇게 애매하게 생겼을까? 이글, 파이러트, 유니보드, 
 작은별, 모닥불... 그중에서 모닥불은 우리 하이텔과 비슷한 모습을 나름대로
 꾸밀 수 있어서 좋았다. 그래도... 이런 소스코드가 공개여서 그런 지 이것은
 간단한 것이 계속 중복되고... C를 리눅스하면서 2달간 배우기는 했지만 나같은
 초보에게도 문제가 많게 보였다. 그래서... 다른 호스트를 보고 느끼고 한 점을
 내가 나름대로 구성하고 표준이 될만한 호스트를 제작하고 싶었다. 
 그런데...  마침 학교에서는 21세기다, 행복한 선본이다 해서 학교전산망 구축에
 열을 올리는 분위기가 고조되고 있었다. 물론 과비비라는 것이 전산망 구축의 
 가장 작은 부분이고. 별로 상관이 없다고 말할 지도 모르지만... 원체 실천이 
 중요한 것이라서 반대표는 나에게 과비비 사업을 부탁했다... 지금도 과비비 
 사업에 혼자서 뛰고 있지만...
 그래서 이제 호스트 제작은 약간의 의무감을 갖게 되고 밤을 새면서... 
 눈탱이 시뻘개지도록 모니터를 바라보면서 아직도 잘 쓰지 못하는 gdb를 가지고
 이곳 저곳 쑤시고... 같은 행동, 같은 실행. 같은 디버깅을 하루에도 수백, 수천번
 을 한 결과 나름대로 안정하고 깔끔한 호스트 프로그램을 작성할 수 있었다.
 처음에는 다수의 사용자가 사용한다는 점을 인식 못하고 화일을 함부로 
 열어놓았다가 자꾸 게시물이 씹히는(번호가 이상하게 바뀌고 내용이 사라짐)
 현상을 초래하여... 돌탱크가 회원들의 날라오는 돌을 맞고도 끄덕없이 진군하는
 무식한 호스트로 인식되기도 했다. 하하하..................
 지금 공개하는 것은 1.0이다. 프로그램은 모듈별로 잘 정돈이 되어 있다고 
 생각한다. 각각의 모듈은... 다음과 같은 일을 한다고 간략하게 설명하겠다.

			2.프로그램의 간략한 설명.
------------------------------------------------------------------------------
 bbs.h; 이것은 가장 중요한 비비에스의 헤더화일이다. 
	이곳에서는 기본적인 구조와 전역변수등등이 저장되어 있다.
	프로그램을 이해하기 위해서는 이곳에 있는 변수들의 쓰임과
	이름을 낱낱이 기억하는 것이 좋다.
	내가 프로그래밍할 때에도 이들을 친구들 이름 기억하듯이 
	외웠다. 프로그래밍이라는 것은 좋은 변수들과 변수들이 모인
	함수라는 단체들을 잘 이끌고 조직하는 것같다(앗..왠 꼴깝)

 main.c; 이것은 다른 모듈들을 정돈해서 실행하는 기본적인 중심뼈대.
 guest.c; 이것은 손님이 접속하면 온라인 가입신청을 해주는 모듈이다.
 boardisplay.c; 이것은 게시판 타이틀 출력, 내용출력등을 담당하는 것이다.
		특이할 만한 점은 화일란 게시물도 이것으로 출력하고
		짤막하게 들어있는 공중변소 프로그램도 이것으로 출력한다.
 commands.h; 이것은 명령어 일람표다. 
		돌탱크에는 기본적으로 
		1. sub메뉴가 있는곳;
		2. 게시물 타이틀 출력되는 곳;
		3. 게시물 내용 출력되는 곳;
		4. 화일 타이틀 출력되는 곳;
		5. 화일 내용 출력되는 곳;
		이 있다. 이곳에서의 명령을 구분해서 처리할 수 있도록 했다.
		그러므로 명령을 추가할 때 이 부분을 사용하면... 아주
		간단히 만들 수 있다...
		물론 모닥불같이 외부 프로그램을 사용할 수 있도록 다른
		조치도 취해놓았다.
 commands.c; 이것은 명령어 일람표에 있는 명령이다.
		기본적으로 이곳에 있는 명령을 통해서 다른 모듈에 있는
		함수들이 실행된다. 이렇게 해놓으니 나중에 소스 수정에
		용이함을 느낄 수 있었다.
 editor.c; 이것은 라인에디터이다. 
		대학교 1학년때 링크트 리스트도 몰라서 라인에디터를 못 짜던
		시절이 있었다. 후~ 그때에는 그토록 이해되지 않던 것이
		지금이 이렇게 이해가 잘 될까? 신기할 정도다.
 files.c; 화일의 업,다운을 담당하는 함수이다.
		내 생각에는 아주 잘 되어있는 것같은데 계속해서
		사용자 입장에서 수정하고 있다.
		회원들은 업다운 할 때 등록이 잘 되었음 하는 것이다.
		시간을 투자해서 올린 화일이 등록을 잘 못해서 손실되는 것은
		참으로 기분나쁜 일이다.
 mail.c; 이것은 메일관련 모듈이다.
		메일은
		읽고, 쓰고, 체크할 수 있도록 했다. 아직 비비에스 안에서만
		사용할 수 있게 제한적이다. 인터넷 릴레이에 대해서는 아는 것이
		없어서 아직 추가를 못하고 있다.
 io.c; 이것은 키보드 입력이다. 이 부분을 통해서 비비에스를 모니터할 수 있다.
	키입력시 키입력한 것을 임시화일로 만들어서 계속 모니터할 수 있게 했다.
	이것은 부끄럽지만 독창적이라고 말하고 싶다.
 maintain.c; 이것은 동호회 운영자 명령들이다. 
		의외로 돌탱크는 동호회 운영자의 권한이 쎄다. 
		운영자도 동호회 운영자에게 허락을 구하고서
		동호회 운영에 참가해야한다.
		계속 업버젼해서 동호회부분의 메뉴는 동호회 운영자들이
		따로 만들어서 기억할 수 있도록 만들고 싶다.
 profile.c; 이것은 개인 정보관리이다. 나의 경우에는 과비비를 구성하기 때문에
		많은 관심이 집중되는 곳이다. 그러나 DB에 관한 지식도 별로 
		없는 사정이라 그저 다른 것과 다를 바 없는 구성이다. 지금은...
 sysop.c; 이것은 슈퍼 시솝의 운영메뉴이다.
		신입회원의 가입처리, 아이디 삭제... 아이디 권한 부여..등등
		전자게시판 전반에 대한 처리를 수행한다....
		모니터링과 LOGFILE 열람...
		REPORT를 열람할 수 있다.
 etc.c; 요기에는 갖가지 잡다한 함수들이 들어있다.
	어디에 분류해놓아야할 지 모르는 함수들이 들어있다.
	etc.c 에 항상 함수들의 추가상태를 적어놓을테니... 이해에는 별
	문제가 없을 듯싶다.



 checktime.c; 이것은 시간을 체크해서 3분이 넘으면 자동으로 끊겨지게하는
		일종의 감시 프로세스이다. 위의 것들과 따로 컴파일이 되어
		비비에스가 실행될 때 가장 먼저 실행되는 것이다.
		이 프로그램은 처음 실행되어서 접속한 포트를 기억하고
		위의 본 프로그램을 실행한다.
		본프로그램에게 가는 인수는 접속포트하나뿐이다.
------------------------------------------------------------------------------
			3. 비비에스 설치 방법.

  비비에스 설치방법은 다른 유사한 것들과 많이 비슷하다.
 그래도 여타의 시행착오를 거치지 않기 위해서 자세히 읽어주기 바란다.

 이 작업들은 리눅스 사용자들을 기준으로 했기 때문에 root로 login해서 
 실행하는 것을 기본으로 했다.

 (1) adduser로 비비에스 계정을 하나 만든다. 
 (adduser명령은 잘 안다고 가정한다.)
 (2) vi /etc/passwd를 해서 passwd를 수정한다.
	passwd는 리눅스 전체의 보안에 중요한 화일이니 수정을 가할 때
	신중을 기하기 바란다. 잘 못 수정하면 시스템이 죽는 경우가 발생한다.

	passwd화일은 다음과 같이 설정되어 있다.
	
아이디:일방암호화된패스워드:UID:GID:사용자이름:사용자홈디렉토리:처음시작화일

	이곳에서 아이디는 비비에스에 들어가기 위한 계정이름이겠고,
	일방암호화된 패스워드는 삭제를 해서 ::로 만들어야겠다.
	UID나 GID는 다른 사용자와 같을 수 없게 이상한 숫자로 만들어 놓으면
	좋을 것이다. 물론 그냥 사용해도 문제가 없겠지만 보안에 구멍이 뚫리게
	될 것이다.
	사용자 이름은 있으나 없으나 상관이 없겠지..
	사용자 홈디렉토리는 지정된 그것을 그대로 쓰고
	만일 아이디가 lone이면... /home/lone이겠지?
	처음시작화일은 예를 들어 아이디가 lone이면 /home/lone/bin/checktime하면
	될 것이다. checktime은 비비에스 처음 로그인 시 실행되어서 
	자식프로세스로 남아 항상 본프로그램을 감시하고 있다가 키 인이 장시간
	없으면 접속을 끊는 프로그램이다.

 (3) 그리고서는 돌탱크 프로그램이 있는 곳으로 와서
	Makefile의 인스톨 디렉토리를 위의 예라면 /home/lone으로 하라.
	수정이 끝난 후 make install하면... 비비에스는 설치가 끝날 것이다.

 (4) 인스톨이 되면 자신이 접속해서 기본적인 메뉴구조를 짠다.
	가장 처음 시작될 때에 생기는 아이디는 sysop(passwd:sysop)이다.
	이것으로 접속해서 supersysop이라고 초기메뉴에서 치면
	슈퍼운영자 메뉴로 들어간다. 이곳에 메뉴만드는 항목이 있다.
 (5) 모뎀 접속등의 부가 작업이 끝나면... 당신은 곧바로 자기 비비로 
	접속을 할 수 있을 것이다.
 (6) 안되는가? 처음부터 다시 하고 또 안되면...
	연락을 달라.

-------------------------------------------------------------------------------
			4. 프로그램 이용 방법...

    운영자 가이드를 참고하라... 이 문서와 딸려서 갈 것이다.

-------------------------------------------------------------------------------
                        5. 후 원 금

후원금에 대한 짧은 글...
만일 프로그램에 대한 격려의 뜻으로 적은 돈이나마 보내시고 싶으신 분은
아래로 돈을 입금해 주세요.
돈이 아니더라도 격려의 편지나 메일을 보내주신다면 힘쓴 것이 헛되지 않겠군요.
--지금도 2명이 제 비비에스에 접속해 있는데 컴퓨터가 정신을 못차리는군요.
보내신 돈은 제가 다른 리눅스용 공개 프로그램을 짜는데 도움이 되겠습니다.--
다시 말하겠는데 이 프로그램은 GNU선언문의 취지아래 리눅스에서 무료로
소스까지 공개되는 프로그램임을 밝힘니다.


                 입금처: 농협중앙회 계좌개설점:서울대학교 지점
                         계좌번호:079-02-376156
                         주민등록번호: 720826-1017111
                                          김태욱 앞...


------------------------------------------------------------------------------

					마지막으로 이 프로그램을 짤 수 있는
					심정적 환경을 제공해준 박경희양과
					내가 좋아하는 친구 이은경양에게
					또 다른 많은 친구들에게
					이 프로그램을 바친다.
		
						관악의 등등한 살기
							우기가

