===========================================
	BB2000 1.0.0 운영자 가이드
===========================================

차례
----

1.돌탱크 보안체계
	가. 레벨로 인한 보안
	나. 플랙으로 인한 보안
	다. 투명인간
2. 계정 관리(회원 관리)
	가. 회원 가입 처리
	나. 회원 삭제 처리
	다. 비활동 회원 삭제 처리
	라. 회원 정보 변경
	마. 회원의 권한 제한에 관해서
3. 메뉴 관리
	가. 게시판을 덧붙인다.
	나. 게시판을 삭제한다.
	다. 화일란을 덧붙인다.
	라. 화일란을 삭제한다.
	마. 그밖의 여러 메뉴 추가,삭제등등
4. 메일 
5. 로고화일
6. 모니터링, LOGFILE, REPORT화일들...
7. BBS 로그인에 관해... 
-------------------------------------------------------------------------------
			1. 돌탱크 보안 체계

가. 레벨로 인한 보안
    	사용자에게는 레벨이 있다... 이것으로 제한을 가할 수가 있다.
    적절한 값은 비비에스 운영자의 재량에 맡긴다. int형의 값이니 부족함은
    없을 것이다.

나. 플랙으로 인한 제한(버젼업하면서 폐지)
	int형의 32비트가 각각 플랙이 되어 어떤 행동에 대한 제약을 줄 수
    있게 만들었다. 이부분은 계속 연구수정중이니...
    나중에 추가하겠다.
    지금은 32비트가 동아리 플랙으로 쓰고 있다.
    첫번째 동아리에 가입이 되어있다면 flag값은 1이 되겠다.
    두번째이면 2가 되겠고.. 첫번째 두번째에 가입되어 있으면
    3이 되겠지? 동아리 운영자의 정의는 CIRCLE에 있으며...
    동아리 이름과 동아리 운영자로 순서쌍을 이룰것이다.
    예)  성인동 hommage 게임동 sysop ... ...

다. 투명인간(버젼업하면서 폐지)
	이것은 운영자가 로그인해서 다른 사용자의 방해없이 일을 작업할 때
    좋은 기능을 해줄 것이다. 사용자가 운영자가 있는 것을 알지 못하고
    모니터링에서도 제외될 것이다.
    투명인간은 극히 중요한 운영진에게만 제공되어야할 것이다.
-------------------------------------------------------------------------------
			2. 계정관리
가. 회원 가입 처리
	회원가입처리는 슈퍼운영자만이 할 수 있다.
    슈퍼운영자는 관리코드를 부여받은 사람이다... 관리 코드는 이중으로
    되어있으며... 관리 코드를 잘 못 입력하면 비비에스 접속이 끊긴다.
    비비에스 접속이 끊김과 함께 해킹워닝메시지가 REPORT에 남겨진다.
    supersysop메뉴에서 
     1. 신입회원의 아이디를 발급해줍니다<--가 바로
    회원가입을 시켜주는 것이다. 가입한 순차로 가입을 시켜주며,
    한가지 유의할 점은 가입시키는 도중에 중단하면 안된다는 것이다.

나. 회원 삭제 처리
	아직 이부분에 대해서는 생각 안 해보았다. 일부러 삭제까지 할 필요가
    없기 때문이다. 그냥 남겨두었다가... 비활동 회원으로 처리하면 되기 때문에
    일부러 중요한 회원 화일을 부분 삭제하는 오류는 범하지 않도록 
    추가를 자제하고 있는 편이다.
        supersysop메뉴에서 
      d.사용자 지우기 <-- 가 그것이며
    이 메뉴는 사용자를 아이디별로 지우는 것이다. 
    또, 한가지 방법으로는 
      9. 유져보여주기<--를 하고 난 후
    여기서 지우는 방법인데 dd명령으로 지울 수 있다. 이것은 직접 보고서
    번호를 지정해 지우는 것이기 때문에 더 확실하게 삭제할 수 있다.

다. 비활동 회원 삭제 처리(기능 폐지, 나중에 지원)
	비활동 회원을 30일 이상되는 값으로 삭제 처리할 수 있다.
    아무래도 30일 이전인데 삭제 처리하는 것은... 무언가? 감정이 있어서 그런
    것이 아닐까... 히죽.
라. 회원정보 변경
    회원정보를 변경한다. 
    회원정보의 모든 것을 변경할 수 있다. 그러나 아이디, 이름은...
    게시판에 벌써 기록이 되기 때문에 변경을 하면... 게시판의 이름과 달라지기
    때문에 혼란을 초래할 수 있다(기술적은 아니고)
    그러므로 이부분은 수정하지 않는 것이 좋겠다.
      4. 회원관리(회원정보열람및변경) <-- 그것이며,
    그안에 있는
   	1. 회원 열람은 그 기능을 폐지할 계획이며
	2. 회원 정보 변경은 아이디를 입력하면 그 아이디의 모든 사항을
    수정할 수 있다.

마. 회원의 권한 제한에 관해서...
	회원의 제한 권한은 사설비비에서 중요하다.
    그러나 사설비비에 대한 것보다는 과비비에 치중을 했기 때문에 많이 부족할
    수가 있다. 한달에 한번씩 돈을 입금한 사람만 쓰게 한다든지 등등의
    나중에 추가적으로 하겠다. 그러나 내가 하는 사설비비는 무료를 모토로 하고
    있기 때문에 이부분에 대한 관심은 별로 없다.
-------------------------------------------------------------------------------
			3. 메뉴관리

메뉴관리는 중요하다. 메뉴는 비비에스의 골격을 이루는 것이다. 그러므로 항상
백업을 해서 불의의 사고에 대비하는 습관을 들여야 할 것이다.
자... 기본적으로 메뉴에 대한 기본지식을 갖추고서 들어가야 할 것이다.

struct config{              /* 메뉴화일 구성 */
    char form;              /* 메뉴 형태 */
    int level;              /* 레벨 증가분 */
    int del;                /* 삭제 권한 플래그 */
    char ccode[10];         /* 가기 코드 */
    int w;                  /* 쓰기,업 레벨 */
    int r;                  /* 읽기,다운 레벨 */
    char list[40];          /* 메뉴 제목 */
    int deep;               /* 게시물 깊이 */
    struct config *downp;   /* 하위메뉴 위치 */
    struct config *upp;     /* 상위메뉴 위치 */
    struct config *aeqp;    /* 이전메뉴 위치 */
    struct config *neqp;    /* 다음메뉴 위치 */
    char file[30];          /* 화일위치 디렉토리 */
};

위의 구조체는 메뉴구성에 필요한 것이다.
        각 필드의 설명을 하겠다.
        form은 말 그대로 메뉴의 종류를 구분하는 것이다.
        M; 서브메뉴를 구성할 수 있는 메뉴
        m; 동호회 서브메뉴를 구성할 수 있는 메뉴(미완성 유보중)
        L;공개게시판(레벨로 관리)
        l;비공개게시판(플랙으로 관리)
        F;공개화일란(레벨로 관리)
        f;비공개화일란(플랙으로 관리)
        R;돌탱크에 기본적으로 들어 있는 장소
                그 뒤의 구분은 ccode에 의해서 행해진다.
                chat; 채팅방
                rmail,wmail,smail; 메일관계(읽기,쓰기,체크)
        T; 공개게시판을 약간 변형해서 만든 공중변소 게시판이다..
        (삭제는 누구나 가능하고, 게시자의 이름과 아이디가 절대 비공개이다)

자. 그리고 메뉴를 다시 구성할 때에는 슈퍼운영자의 메뉴만들기란에서
        만들어야한다.

가. 게시판 덧붙이기...
        메뉴구성을 하는데 있어서.. 위의 설명한 메뉴를 추가한다.
나. 게시판 삭제...
        게시판을 삭제한다. 그러나.. 게시물의 내용및 헤더화일은
        그대로 보존이 된다. 완전히 삭제할려면.. 수작업으로 그것들까지
        삭제해야한다. 이것은 게시물의 안전한 보관을 위해서이다.
다. 화일란 덧붙이기...
        메뉴구성을 하는데 있어서.. 위의 설명한 메뉴를 추가한다.
라. 화일란 덧붙이기...
        화일란은... 자료가 올라오는 게시판이다. 그래서
	자료가 옮겨질 디렉토리가 필요하다. 자료는 편의상 ftp용과 같이 쓸 수
	있게 ftp란 디렉토리로 임시 옮겨졌다가 등록이 되면 화일디렉토리로 
	옮겨진다. 구조체에서 file[30]이라는 부분은 ftp디렉토리안에서 또
	서브디렉토리로 어느 디렉토리에 화일을 저장하라는 지시 디렉토리가
	담겨져 있다. 이러면.. 등록할 때 파일은 등록디렉토리로 옮겨지게 된다.
	화일의 효율적인 관리를 할 수 있다.
	***그러나 화일디렉토리의 생성및 소멸은 루트가 수작업으로 하게 만들어
	놓았다. 아무래도 자료의 전송은 중요하기 때문에 자료실의 구성은
	root급의 사람이 만들고 없애게 하는 것이 좋다고 생각했기 때문이다.
마. 그밖의 여러 메뉴 추가, 삭제등등
	먼저 chat은 알겠지만 대화방이다. 설명할 것이 없다.
	    단지, 이렇게 하면 이쁘다는 것을 말해주고 싶다.
		M으로 대화방 만들고
		R chat로 채팅실을 만들고
		L 로 채팅방메모실하면... 다른 사설비비에서 보는
			채팅방같이 꾸밀 수도 있구. 더 꾸미면..
			하이텔과 같은 채팅방을 꾸밀 수도 있다.
	그리고 rmail,wmail,cmail도 마찬가지이다.
	csysopXXX는 동호회 메뉴인데.. 이것은 나날이 업그레이드중이다.
	비비운영의 분산화를 위해서 동호회 촌장(운영자)의 역할을 강화하는 것이다
	그러면 일부러 시솝의 도움을 얻지 않고도 쉽게 동호회 운영을
	시솝과 같은 능력으로 할 수 있게된다.
	지금은... 회원 가입, 탈퇴, 열람을 할 수 있다.
	T는 일반 게시판 만드는 법과 같다.
-------------------------------------------------------------------------------
			4. 메 일 란

메일란은 일반적인 하이텔 메일과 같다.
-------------------------------------------------------------------------------
			5. 로고화일

로고화일은 logo라는 디렉토리에 저장된다.
소스가 수정되면서 계속 추가가 되겠지만 현재 있는 로고화일에 대해서
설명하면....

 welcome.log 이것은 접속해서 들어올 때 나오는 로고이다.

 *.mnu 이것은 M의 메뉴화면이다. 없으면 소스에 있는 규격이 출력된다.
 (*리스크는 M의 ccode이다)
 filehelp.hlp 화일게시란의 도움말이다.
 listhelp.hlp 게시판란의 도움말이다.
 mailhelp.hlp 메일란의 도움말이다.
 mainhelp.hlp M에서의 도움말이다.
 download 다운로드 시작할 때의 로고화면
 download.end 다운로드가 성공적으로 끝나면 나오는 로고화면
 upload 업로드 시작시 나오는 로고
 upload.end 업로드 종료시 나오는 로고
 guest.log 가입신청할 때 나오는 로고
 guest.end 가입신청 끝날 때 나오는 로고
 
 그리고 각 게시물란의 ccode로 되어진 화일은 그 게시물란에 들어갈 때
 나오는 로고화면인데.. 별로 필요하지 않을 것이다.
-------------------------------------------------------------------------------
			6. 모니터링, LOGFILE, REPORT화일들
---- 
모니터링은 또한 돌탱크의 장점이라고 할 수 있는데
다음과 같은 화일들이 모니터링을 위해서 생성된다.

FINGER.tty??
TRACE.tty??
STAT.tty??
WHOISNOW

이것들은 tmp디렉토리에 생성되고 언제든 지 삭제해서 정리할 수 있는 화일들이다.
    *FINGER는 현재 어디서 무엇을 하고 있는 지 알려주는 아주 작은 임시화일이다.
	만들어지고 지워지고 계속 반복한다.
    *TRACE는 사용자가 어떤 키를 쳤는 지 계속 화일에 기록한다.
 	나중에는 크기가 커질테니 디스크가 모자라면 이것을 정리해줘라.
    *STAT는 현 사용자가 어떤 상태에 있는 지 숫자로 알려준다.
	1이면 다운이나 업로드중.
	3은 critical 에러 상태...***심각한 시스템 장애*** 
	0은 보통 상태
	STAT는 checktime이라는 프로그램이 체크하는 화일이 될 것이다.
    *WHOISNOW는 현재 사용중인 사용자들의 간단한 나열이다.
	현재 이용자를 찾는데 이 화일을 항상 사용할 것이다.
----
다음은 LOGFILE이다. 이것은  
사용자의 로그인, 로그아웃을 기록한다.
logfile디렉토리에 생긴다.
    supersysop메뉴에 LOGFILE을 열람합니다 가 있지만
    이것은 아직 확실하게 지원을 해주지 않아서 유보중이다.
    깨져서 나오거나 원하는 결과를 얻지 못할 것이다.
---- 
다음은 REPORT화일인데 이것은 사용자가 접속해서 무엇을 하고 갔는 지에 대한
정보를 남겨준다.
지금 나오는 정보는 

	a.글을 썼을 때
	b.업로드를 했을 때
	c.업로드가 잘 못 되었을 때
	d.업로드를 했는데 등록을 안 했을 때
	e.다운로드를 했을 때
	f.고급사용자가 왔다 갔을 때

    a. 글을 썼을 때 
	어디에서 무엇을 썼는 지 report한다.
    b. 업로드를 했을 때
	어디에서 무엇을 업로드 했는 지 report한다.
    c. 업로드가 잘 못 되었을 때
	어디에서 무엇을 업로드하다가 잘 못 되었는 지 알리고
	현재 잘 못 올라온 화일의 위치를 알려준다.
    d. 업로드를 했는데 등록을 안 했을 때
	어디에서 무엇을 업로드하다가 등록을 안 했는 지 알리고
	현재 어디에 위치하고 있는 지 알린다.
    e. 다운로드를 했을 때.
	어디에서 무엇을 다운했는 지 알려준다.
    f. 고급사용자가 왔다 갔을 때
	어느정도의 레벨이 높은 사람이 왔다 갔을 때 report한다.
	(이것은 해킹을 막기 위한 수단이다)

-------------------------------------------------------------------------------
			7. 비비에스 로그 인.

    비비에스의 로그인에 대해서는 각기 시스템에 따라서 생각하면 된다.
인터넷에 물려 있으면 ethernet을 통해서 기술적으로 로그인할 수 있게 만들면 되고
전화선이 있으면 uugetty라는 유틸을 이용해서 모뎀의 로그인을 항상 감시하게 하면
될 것이다.
그외에 단말기를 통한 로그인도 getty류의 프로그램으로 접속을 만들어 주면 된다.
이 부분은 '돌탱크'와 큰 관련은 없으므로 이만 줄인다.

-------------------------------------------------------------------------------	



appendix) supersysop 메뉴얼 quick reference

     -------------------------------
     | 이곳은 슈퍼운영자메뉴입니다 |
     -------------------------------

 1. 신입회원의 아이디를 발급해줍니다.
 2. 아이디를 정리합니다.
 3. LOGFILE을 열람합니다.
 4. 회원관리(회원정보열람및변경)
 5. 게시물정리(유보)
 6. 셧다운 공고 
 7. 편지함 정리
 8. 메뉴구성
 9. 유져보여주기
 d. 사용자 지우기
 p. 슈퍼운영자 메뉴에서 나간다.

설명) 
1. 신입회원의 아이디를 발급해준다... 한마디로 가입신청을 해주는 메뉴이다.
2. 아이디를 정리합니다. (아직 지원되지 않음)
3. LOGFILE을 열람합니다. (아직 지원되지 않음)
4. 회원관리(회원정보열람및변경)
---> 이 및에는 2. 회원 정보 변경 이 있는데
	회원의 정보를 모두 바꿀 수 있다.
5. 게시물정리(유보) (아직 지원되지 않는다)
6. 셧다운 공고 (모든 사용자들에게 메시지를 전달한다)
7. 편지함 정리 (아직 지원되지 않는다)
8. 메뉴구성 (돌탱크의 메뉴를 구성한다 메뉴구성은 위편을 참조)
9. 유져보여주기 (돌탱크에 정식가입된 사용자를 보여준다)
d. 사용자 지우기 (아이디별로 영구 삭제한다)
p. 슈퍼운영자 메뉴에서 나간다. (슈퍼운영자 메뉴에서 나간다)

